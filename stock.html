<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stok Y√∂netimi</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-100">

<div class="container mx-auto px-4 py-8">

    <h1 class="text-3xl font-bold mb-4">üì¶ Stok Y√∂netimi</h1>

    <a href="index.html" class="text-blue-600 hover:underline mb-6 inline-block">
        ‚Üê Ana Sayfaya D√∂n
    </a>

    <!-- √úr√ºn Ekle / D√ºzenle -->
    <div class="bg-white rounded shadow p-6 mb-8">
        <h2 class="text-xl font-semibold mb-4">√úr√ºn Ekle / D√ºzenle</h2>

        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
            <input id="name" type="text" placeholder="√úr√ºn Adƒ±" class="border rounded px-3 py-2">
            <input id="qty" type="number" placeholder="Adet" class="border rounded px-3 py-2">
            <input id="price" type="number" placeholder="Fiyat" class="border rounded px-3 py-2">
            <button onclick="addOrUpdate()"
                    class="bg-blue-500 text-white rounded px-4 py-2 hover:bg-blue-600">
                Kaydet
            </button>
        </div>
    </div>

    <!-- Toplam Deƒüer -->
    <div class="mb-4 text-lg font-semibold">
        Toplam Stok Deƒüeri: <span id="total">0</span> ‚Ç∫
    </div>

    <!-- Liste -->
    <div class="bg-white rounded shadow p-6">
        <h2 class="text-xl font-semibold mb-4">√úr√ºn Listesi</h2>

        <table class="w-full border">
            <thead class="bg-gray-100">
                <tr>
                    <th class="border px-3 py-2">√úr√ºn</th>
                    <th class="border px-3 py-2">Adet</th>
                    <th class="border px-3 py-2">Fiyat</th>
                    <th class="border px-3 py-2">ƒ∞≈ülem</th>
                </tr>
            </thead>
            <tbody id="list"></tbody>
        </table>

        <button onclick="exportCSV()"
                class="mt-4 bg-gray-700 text-white px-4 py-2 rounded">
            CSV ƒ∞ndir
        </button>
    </div>

</div>

<script>
    let products = JSON.parse(localStorage.getItem("products")) || [];
    let editIndex = -1;

    function save() {
        localStorage.setItem("products", JSON.stringify(products));
    }

    function render() {
        const list = document.getElementById("list");
        list.innerHTML = "";

        products.forEach((p, i) => {
            list.innerHTML += `
                <tr>
                    <td class="border px-3 py-2">${p.name}</td>
                    <td class="border px-3 py-2">${p.qty}</td>
                    <td class="border px-3 py-2">${p.price} ‚Ç∫</td>
                    <td class="border px-3 py-2 space-x-2">
                        <button onclick="edit(${i})" class="text-blue-600">D√ºzenle</button>
                        <button onclick="remove(${i})" class="text-red-600">Sil</button>
                    </td>
                </tr>
            `;
        });

        total();
    }

    function addOrUpdate() {
        const name = document.getElementById("name").value;
        const qty = Number(document.getElementById("qty").value);
        const price = Number(document.getElementById("price").value);

        if (!name || qty <= 0 || price <= 0) {
            alert("T√ºm alanlarƒ± doldur");
            return;
        }

        if (editIndex === -1) {
            products.push({ name, qty, price });
        } else {
            products[editIndex] = { name, qty, price };
            editIndex = -1;
        }

        clear();
        save();
        render();
    }

    function edit(i) {
        const p = products[i];
        document.getElementById("name").value = p.name;
        document.getElementById("qty").value = p.qty;
        document.getElementById("price").value = p.price;
        editIndex = i;
    }

    function remove(i) {
        products.splice(i, 1);
        save();
        render();
    }

    function total() {
        let t = products.reduce((sum, p) => sum + p.qty * p.price, 0);
        document.getElementById("total").innerText = t;
    }

    function clear() {
        document.getElementById("name").value = "";
        document.getElementById("qty").value = "";
        document.getElementById("price").value = "";
    }

    function exportCSV() {
        let csv = "√úr√ºn,Adet,Fiyat\n";
        products.forEach(p => {
            csv += ${p.name},${p.qty},${p.price}\n;
        });

        const blob = new Blob([csv], { type: "text/csv" });
        const a = document.createElement("a");
        a.href = URL.createObjectURL(blob);
        a.download = "stok.csv";
        a.click();
    }

    render();
</script>

</body>
</html>
       
            

        
